<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/page-settings :: head}"></head>

<body>

	<header th:replace="~{fragments/page-settings :: header('tickets')}">

	</header>

	<main>

		<div class="container">
			<div class="row justify-content-center">
				<h1 class="text-center mb-3">Ticket Creation</h1>
				<hr>
				<form id="ticketform" method="POST" th:action="@{/tickets/create}" th:object="${ticket}"
					style="width: 30rem;">
					<div class="form-group mb-2">
						<label for="inputTitle ms-2"><b>Title: </b></label>
						<input type="text" class="form-control my-2" id="inputTitle" aria-describedby="emailHelp"
							placeholder="Insert text..." th:field="*{title}">
						<ul th:if="${#fields.hasErrors()}" class="text-danger mt-2 ps-4">
							<li th:each="err : ${#fields.errors('title')}" th:text="${err}" class="error " />
						</ul>
					</div>
					<div class="form-group">
						<label for="ticketText"><b>Insert Text: </b></label>
						<textarea class="form-control my-2" id="ticketText" rows="3" th:field="*{text}"></textarea>
						<small id="inputTextHelp" class="form-text text-muted ms-3">Try to be clear in your
							explanation.</small>
						<ul th:if="${#fields.hasErrors()}" class="text-danger mt-2 ps-4">
							<li th:each="err : ${#fields.errors('text')}" th:text="${err}" class="error " />
						</ul>
					</div>
					<hr>
					<label for="form-check1"><b>Select Statement:</b></label>
					<div class="form-check1 my-2">
						<th:block th:each="state : ${states}">
							<input type="radio" class="btn-check" name="|options_${state}|" th:id="|option_${state}|"
								autocomplete="off" th:value="${state}" th:field="${ticket.state}">
							<label class="btn btn-sm btn-outline-dark" th:for="|option_${state}|">[[${state}]]</label>
						</th:block>
					</div>
					<hr>
					<th:block th:if="${availableUsers.size()} > 0">
						<label for="form-check2"><b>Available Operators:</b></label>
						<div class="form-check2 my-2">
							<th:block th:each="user : ${availableUsers}">
								<input type="radio" class="btn-check" name="|options_${user.username}|"
									th:id="|option_${user.username}|" autocomplete="off" th:value="${user.id}"
									th:field="${ticket.user}">
								<label class="btn btn-sm btn-outline-dark"
									th:for="|option_${user.username}|">[[${user.username}]]</label>
							</th:block>
						</div>
						<small id="form-check2" class="form-text text-muted ms-3">
							If you don't select anyone, the first one available will be selected</small>
					</th:block>

					<hr>
					<div>
						<button type="submit" class="btn btn-dark">Submit</button>
						<a th:href="@{/tickets/create}" class="btn btn-dark">Reset</a>
					</div>
				</form>
			</div>
		</div>

	</main>

	<footer>

	</footer>
</body>

<th:block th:replace="~{fragments/page-settings :: scripts}"></th:block>

</html>